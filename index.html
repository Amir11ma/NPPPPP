<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ÙˆØ¶Ø¹ÛŒØª Ø¢Ø¨â€ŒÙˆÙ‡ÙˆØ§ÛŒ Ø§ÛŒØ±Ø§Ù†</title>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/rastikerdar/vazir-font@v30.1.0/dist/font-face.min.css">

<style>
body{margin:0;font-family:Vazirmatn;background:#eef3f9}
header{
  background:linear-gradient(90deg,#1976d2,#42a5f5);
  color:#fff;padding:16px;
  display:flex;justify-content:space-between;align-items:center
}
.btn{
  background:#ff9800;color:#fff;border:none;
  padding:8px 14px;border-radius:12px;font-weight:700
}
main{padding:14px;max-width:1000px;margin:auto}
.search{
  background:#fff;border-radius:14px;
  padding:10px 14px;margin-bottom:14px;
  box-shadow:0 4px 14px rgba(0,0,0,.05)
}
.search input{border:none;outline:none;width:100%;font-size:14px}
.list{display:grid;gap:12px}
.card{
  background:#fff;border-radius:18px;
  padding:14px 16px;
  display:flex;justify-content:space-between;align-items:center;
  box-shadow:0 6px 18px rgba(0,0,0,.08)
}
.name{font-weight:800}
.temp{text-align:center}
.deg{font-size:20px;font-weight:900}
.icon{font-size:26px;animation:float 2.5s infinite}
@keyframes float{50%{transform:translateY(-6px)}}
footer{text-align:center;padding:14px;font-size:13px;color:#666}
</style>
</head>

<body>

<header>
  <div>
    <div style="font-weight:800">ğŸŒ¦ï¸ ÙˆØ¶Ø¹ÛŒØª Ø¢Ø¨â€ŒÙˆÙ‡ÙˆØ§ÛŒ Ø§ÛŒØ±Ø§Ù†</div>
    <div style="font-size:12px">Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù‡Ø± Û± Ø¯Ù‚ÛŒÙ‚Ù‡</div>
  </div>
  <button class="btn" onclick="openChannel()">Ú©Ø§Ù†Ø§Ù„ Ù…Ø§</button>
</header>

<main>
  <div class="search">
    <input id="search" placeholder="Ø¬Ø³ØªØ¬ÙˆÛŒ Ø§Ø³ØªØ§Ù† ÛŒØ§ Ø´Ù‡Ø±...">
  </div>
  <div id="list" class="list"></div>
</main>

<footer>Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯Ù‡ ØªÙˆØ³Ø· BGM STUDIO</footer>

<script>
function openChannel(){
  window.open("https://eitaa.com/BGM_STUDIO","_blank");
}

/* Ø§Ø³ØªØ§Ù†â€ŒÙ‡Ø§ (Ù‡Ù…ÛŒØ´Ù‡) */
const provinces={
  "ØªÙ‡Ø±Ø§Ù†":[35.6892,51.3890],
  "Ø³Ù…Ù†Ø§Ù†":[35.5753,53.3958],
  "Ø§ØµÙÙ‡Ø§Ù†":[32.6546,51.6680],
  "ÙØ§Ø±Ø³":[29.5918,52.5837],
  "Ø®Ø±Ø§Ø³Ø§Ù† Ø±Ø¶ÙˆÛŒ":[36.2605,59.6168],
  "Ø¢Ø°Ø±Ø¨Ø§ÛŒØ¬Ø§Ù† Ø´Ø±Ù‚ÛŒ":[38.0962,46.2738],
  "Ø¢Ø°Ø±Ø¨Ø§ÛŒØ¬Ø§Ù† ØºØ±Ø¨ÛŒ":[37.5498,45.0786],
  "Ø§Ø±Ø¯Ø¨ÛŒÙ„":[38.2498,48.2933],
  "Ú¯ÛŒÙ„Ø§Ù†":[37.2808,49.5832],
  "Ù…Ø§Ø²Ù†Ø¯Ø±Ø§Ù†":[36.5659,53.0586],
  "Ú¯Ù„Ø³ØªØ§Ù†":[36.8456,54.4390],
  "Ù‚Ù…":[34.6401,50.8764],
  "Ù…Ø±Ú©Ø²ÛŒ":[34.0917,49.6892],
  "Ù‚Ø²ÙˆÛŒÙ†":[36.0881,49.8547],
  "Ø²Ù†Ø¬Ø§Ù†":[36.6769,48.4963],
  "Ø§Ù„Ø¨Ø±Ø²":[35.8327,50.9915],
  "Ú©Ø±Ù…Ø§Ù†":[30.2839,57.0834],
  "ÛŒØ²Ø¯":[31.8974,54.3569],
  "Ø®ÙˆØ²Ø³ØªØ§Ù†":[31.3183,48.6706],
  "Ø¨ÙˆØ´Ù‡Ø±":[28.9234,50.8203],
  "Ù‡Ø±Ù…Ø²Ú¯Ø§Ù†":[27.1832,56.2666],
  "Ø³ÛŒØ³ØªØ§Ù† Ùˆ Ø¨Ù„ÙˆÚ†Ø³ØªØ§Ù†":[29.4963,60.8629],
  "Ú©Ø±Ø¯Ø³ØªØ§Ù†":[35.3219,46.9862],
  "Ú©Ø±Ù…Ø§Ù†Ø´Ø§Ù‡":[34.3142,47.0650],
  "Ø§ÛŒÙ„Ø§Ù…":[33.6374,46.4227],
  "Ù‡Ù…Ø¯Ø§Ù†":[34.7983,48.5146],
  "Ù„Ø±Ø³ØªØ§Ù†":[33.4878,48.3558],
  "Ú†Ù‡Ø§Ø±Ù…Ø­Ø§Ù„ Ùˆ Ø¨Ø®ØªÛŒØ§Ø±ÛŒ":[31.9614,50.8456],
  "Ú©Ù‡Ú¯ÛŒÙ„ÙˆÛŒÙ‡ Ùˆ Ø¨ÙˆÛŒØ±Ø§Ø­Ù…Ø¯":[30.6682,51.5870],
  "Ø®Ø±Ø§Ø³Ø§Ù† Ø´Ù…Ø§Ù„ÛŒ":[37.4710,57.1013],
  "Ø®Ø±Ø§Ø³Ø§Ù† Ø¬Ù†ÙˆØ¨ÛŒ":[32.8649,59.2262]
};

/* Ø´Ù‡Ø±Ù‡Ø§ (ÙÙ‚Ø· Ø¨Ø§ Ø¬Ø³ØªØ¬Ùˆ) */
const cities={
  "Ù…Ø´Ù‡Ø¯":[36.2605,59.6168],
  "Ø´ÛŒØ±Ø§Ø²":[29.5918,52.5837],
  "ØªØ¨Ø±ÛŒØ²":[38.0962,46.2738],
  "Ø±Ø´Øª":[37.2808,49.5832],
  "Ø§Ù‡ÙˆØ§Ø²":[31.3183,48.6706],
  "Ú©Ø±Ø¬":[35.8327,50.9915]
};

function icon(code,temp){
  if(code>=71) return "â„ï¸";
  if(code>=51) return "ğŸŒ§ï¸";
  if(code>=3) return "â˜ï¸";
  if(temp<10) return "ğŸŒ¤ï¸";
  return "â˜€ï¸";
}

async function getWeather(lat,lon){
  const r=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true`);
  const j=await r.json();
  return j.current_weather;
}

async function render(){
  const q=document.getElementById("search").value.trim();
  const list=document.getElementById("list");
  list.innerHTML="";

  for(const [n,l] of Object.entries(provinces)){
    if(q && !n.includes(q)) continue;
    const w=await getWeather(l[0],l[1]);
    list.innerHTML+=card(n,w);
  }

  if(q){
    for(const [n,l] of Object.entries(cities)){
      if(n.includes(q)){
        const w=await getWeather(l[0],l[1]);
        list.innerHTML+=card(n,w);
      }
    }
  }
}

function card(name,w){
  return `
  <div class="card">
    <div class="name">${name}</div>
    <div class="temp">
      <div class="deg">${Math.round(w.temperature)}Â°C</div>
      <div class="icon">${icon(w.weathercode,w.temperature)}</div>
    </div>
  </div>`;
}

document.getElementById("search").addEventListener("input",render);
render();
setInterval(render,60000);
</script>

</body>
</html>
